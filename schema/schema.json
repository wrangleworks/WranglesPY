{"$schema": "http://json-schema.org/draft-07/schema#", "title": "Wrangles Recipes", "description": "Recipes execute an automated sequence of Wrangles. Read, wrangle, write.", "type": "object", "additionalProperties": false, "properties": {"run": {"type": "object", "description": "Run actions before or after wrangling, or on failure", "minProperties": 1, "properties": {"on_start": {"type": "array", "description": "Run actions before the main recipe starts", "minItems": 1, "items": {"$ref": "#/$defs/run/items"}}, "on_success": {"type": "array", "description": "Run actions if the recipe succeeds", "minItems": 1, "items": {"$ref": "#/$defs/run/items"}}, "on_failure": {"type": "array", "description": "Run actions if the recipe fails", "minItems": 1, "items": {"$ref": "#/$defs/run/items"}}}}, "read": {"type": "array", "description": "Read data from a variety of sources", "minItems": 1, "items": {"$ref": "#/$defs/read/items"}}, "wrangles": {"type": "array", "description": "A list of wrangles to apply", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "write": {"type": "array", "description": "Export your wrangled data", "minItems": 1, "items": {"$ref": "#/$defs/write/items"}}, "alias": {"type": "array", "description": "Placeholder to store YAML anchor values for use with aliases elsewhere in the recipe"}}, "$defs": {"read": {"items": {"type": "object", "description": "Define import sources", "maxProperties": 1, "additionProperties": false, "patternProperties": {"^custom\\..*": {"type": "object", "description": "Use custom functions."}}, "properties": {"akeneo": {"type": "object", "description": "Read data from an Akeneo PIM", "required": ["host", "user", "password", "client_id", "client_secret", "source"], "properties": {"host": {"type": "string", "description": "Hostname of the Akeneo PIM instance\ne.g. https://akeneo.example.com\n"}, "user": {"type": "string", "description": "User with access to read the data"}, "password": {"type": "string", "description": "Password for the user"}, "client_id": {"type": "string", "description": "Client ID. These need to be generated in the PIM.\nSee https://api.akeneo.com/documentation/authentication.html\n"}, "client_secret": {"type": "string", "description": "Client Secret"}, "source": {"type": "string", "description": "Type of data to return", "enum": ["products", "products-uuid", "product-models", "media-files", "published-products", "families", "attributes", "attribute-groups", "association-types", "categories", "channels", "locales", "currencies", "measure-families", "measurement-families", "reference-entities", "reference-entities-media-files", "asset-families", "asset-media-files"]}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "parameters": {"type": "object", "description": "Set parameters for the query such as filtering the results.\nSee the Akeneo query parameters for specifics.\ne.g. https://api.akeneo.com/api-reference.html#get_products for products.\n"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "ckan": {"type": "object", "description": "Read data from CKAN", "required": ["host", "dataset", "file"], "properties": {"host": {"type": "string", "description": "The host name of the CKAN site. e.g. https://data.example.com"}, "dataset": {"type": "string", "description": "The name of the dataset. This should be the url version e.g. my-dataset"}, "file": {"type": "string", "description": "The name of the specific file within the dataset. e.g. example.csv"}, "api_key": {"type": "string", "description": "API Key for the CKAN site."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "concurrent": {"type": "object", "description": "The concurrent connector lets you read multiple sources simultaneously rather than sequentially. If the outputs of the reads are not otherwise aggregated, they will be merged together via a union.", "required": ["read"], "properties": {"read": {"type": "array", "description": "Reads to be run concurrently", "minItems": 1, "items": [{"$ref": "#/$defs/read/items"}]}, "max_concurrency": {"type": "integer", "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued.", "minimum": 1}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "file": {"type": "object", "description": "Import a file", "required": ["name"], "properties": {"name": {"type": "string", "description": "The name of the file to import"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "nrows": {"type": "integer", "description": "Number of rows to read", "minimum": 1}, "header": {"type": "integer", "description": "Set the header row number.", "minimum": 0}, "sheet_name": {"type": "string", "description": "Used for Excel files. Specify the sheet to read."}, "orient": {"type": "string", "description": "Used for JSON files. Specifies the input arrangement", "enum": ["split", "records", "index", "columns", "values"]}, "sep": {"type": "string", "description": "Used for CSV files. Set the separation character. Default , (comma)"}, "encoding": {"type": "string", "description": "Used for CSV files. Set the encoding used for the file. Default utf-8"}, "decimal": {"type": "string", "description": "Used for CSV files. Character to recognize as the decimal point (e.g. ',' for European data)."}, "thousands": {"type": "string", "description": "Used for CSV files. Character to recognize as the thousands separator"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "http": {"type": "object", "description": "Get data from a HTTP(S) endpoint.", "required": ["url"], "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default GET.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "json": {"type": "object", "description": "Pass data as a JSON encoded request body."}, "json_key": {"type": "string", "description": "Select sub-elements from the response JSON. Multiple levels can be specified with e.g. key1.key2.key3"}, "orient": {"type": "string", "description": "The format of the JSON to be converted to a dataframe. Default records.", "enum": ["records", "columns", "tight"]}, "oauth": {"type": "object", "required": ["url"], "description": "Make a request to get an OAuth token prior to sending the main request", "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default POST.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "json": {"type": "object", "description": "Pass data as a JSON encoded request body."}}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "matrix": {"type": "object", "description": "The matrix connector lets you use variables to automatically execute multiple reads that are based on the combinations of the variables. If the outputs of the reads are not otherwise aggregated, they will be merged together via a union.", "required": ["variables", "read"], "properties": {"variables": {"type": "object", "description": "A set of variables as key/values. The action will be execute once for each combination of variables.\nValues may be a single value or a list or reference a custom function."}, "read": {"type": "array", "description": "The read section of a recipe to execute for each combination of variables", "minItems": 1, "items": [{"$ref": "#/$defs/read/items"}]}, "strategy": {"type": "string", "enum": ["permutations", "loop"], "description": "Determines how to combine variables when there are multiple. loop (default) iterates over each set of variables, repeating shorter lists  until the longest is completed. permutations uses the combination of all  variables against all other variables."}, "max_concurrency": {"type": "integer", "minimum": 1, "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued. Default 10."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "memory": {"type": "object", "description": "The memory connector allows saving dataframes and variables in memory for communication between successive wrangles and recipes. All contents of the memory connector are lost once the python script finishes executing.", "properties": {"id": {"type": "string", "description": "A unique ID to identify the data. If not specified, will read the last dataframe saved in memory"}, "orient": {"type": "string", "enum": ["dict", "list", "split", "tight", "index"], "description": "Set the arrangement of the data. See pandas.DataFrame.to_dict method for options. Default is tight"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mongodb": {"type": "object", "description": "Import data from a mongoDB Server", "required": ["user", "password", "database", "collection", "host", "query"], "properties": {"user": {"type": "string", "description": "User with access to the database"}, "password": {"type": "string", "description": "Password of user"}, "database": {"type": "string", "description": "Database to be queried"}, "host": {"type": "string", "description": "mongoDB cluster-url"}, "query": {"type": "string", "description": "mongoDB query"}, "projection": {"type": "string", "description": "Select which fields to include"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mssql": {"type": "object", "description": "Import data from a Microsoft SQL Server", "required": ["host", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "command": {"type": "string", "description": "Table name or SQL command to select data.\nNote - using variables here can make your recipe vulnerable\nto sql injection. Use params if using variables from\nuntrusted sources."}, "database": {"type": "string", "description": "The database to connect to"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 1433."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "params": {"type": ["array", "object"], "description": "List of parameters to pass to execute method.\nThis may use %s or %(name)s syntax"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mysql": {"type": "object", "description": "Import data from a MySQL Server", "required": ["host", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "command": {"type": "string", "description": "Table name or SQL command to select data.\nNote - using variables here can make your recipe vulnerable\nto sql injection. Use params if using variables from\nuntrusted sources."}, "database": {"type": "string", "description": "The database to connect to"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 3306."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "params": {"type": ["array", "object"], "description": "List of parameters to pass to execute method.\nThis may use %s or %(name)s syntax"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "postgres": {"type": "object", "description": "Import data from a PostgreSQL Server", "required": ["host", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "command": {"type": "string", "description": "Table name or SQL command to select data.\nNote - using variables here can make your recipe vulnerable\nto sql injection. Use params for variables from\nuntrusted sources."}, "database": {"type": "string", "description": "The database to connect to"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 5432."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "params": {"type": ["array", "object"], "description": "List of parameters to pass to execute method.\nThis may use %s or %(name)s syntax"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "pricefx": {"type": "object", "description": "Import data from a PriceFx instance.", "required": ["host", "partition", "target", "user", "password"], "properties": {"host": {"type": "string", "description": "Hostname e.g. example.pricefx.com"}, "partition": {"type": "string", "description": "Partition"}, "user": {"type": "string", "description": "The user to connect as"}, "password": {"type": "string", "description": "Password for the specified user"}, "target": {"type": "string", "description": "Type of Data. Products, Customers, Data Source, etc. For Data Sources or Product/Customer Extensions a source must also be provided.", "enum": ["Products", "Product Extensions", "Customers", "Customer Extensions", "Data Source"]}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "source": {"type": "string", "description": "If the data type is a Data Source or Extension, set the specific table."}, "batch_size": {"type": "integer", "description": "Queries are broken into batches for large data sets. Set the size of the batch. If you're having trouble with timeouts, try reducing this. Default 10,000."}, "critera": {"type": "array", "description": "Filter the returned data set."}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "recipe": {"anyOf": [{"$ref": "#"}, {"type": "object", "required": ["name"], "properties": {"name": {"type": "string", "description": "The name of the recipe to read from"}, "variables": {"type": "object", "description": "A dictionary of variables to pass to the recipe"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}]}, "s3": {"type": "object", "description": "Import data from a file in AWS S3", "required": ["bucket", "key"], "properties": {"bucket": {"type": "string", "description": "The name of the bucket where file will be read"}, "key": {"type": "string", "description": "The name of the key to download from"}, "access_key": {"type": "string", "description": "S3 access key"}, "secret_access_key": {"type": "string", "description": "S3 secret access key"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "salesforce": {"type": "object", "description": "Import data from Salesforce", "required": ["instance", "user", "password", "token", "object", "command"], "properties": {"instance": {"type": "string", "description": "The salesforce instance to read from. e.g. <custom>.my.salesforce.com"}, "user": {"type": "string", "description": "User with read permission"}, "password": {"type": "string", "description": "Password for the user"}, "token": {"type": "string", "description": "Security token for the user"}, "object": {"type": "string", "description": "Object to read data from e.g. Contact"}, "command": {"type": "string", "description": "SOQL query"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "params": {"type": "object", "description": "(Optional) Parameters to be used in the SOQL query Use {my_key} in the command to insert a parameter."}, "domain": {"type": "string", "description": "(Optional) Use test to connect to a sandbox instance."}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "sftp": {"type": "object", "description": "Import a file from an SFTP server", "required": ["host", "user", "password", "file"], "properties": {"host": {"type": "string", "description": "The domain or IP of the SFTP server"}, "user": {"type": "string", "description": "The user to connect as"}, "password": {"type": "string", "description": "The password for the user"}, "file": {"type": "string", "description": "The filename including path on the remote server"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "nrows": {"type": "integer", "description": "Number of rows to read", "minimum": 1}, "header": {"type": "integer", "description": "Set the header row number.", "minimum": 0}, "sheet_name": {"type": "string", "description": "Used for Excel files. Specify the sheet to read."}, "orient": {"type": "string", "description": "Used for JSON files. Specifies the input arrangement", "enum": ["split", "records", "index", "columns", "values"]}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "sqlite": {"type": "object", "description": "Import data from a SQLite Database", "required": ["database", "command"], "properties": {"database": {"type": "string", "description": "The database to connect to including the file path. e.g. directory/database.db"}, "command": {"type": "string", "description": "Table name or SQL command to select data.\nNote - using variables here can make your recipe vulnerable\nto sql injection. Use params if using variables from\nuntrusted sources."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "test": {"type": "object", "description": "Create a test dataframe", "required": ["rows", "values"], "properties": {"rows": {"type": "integer", "description": "Number of rows to include in the generated dataframe", "minimum": 1}, "values": {"type": "object", "description": "Dictionary of columns and values", "patternProperties": {".*": {"type": ["object", "string", "array"], "description": "Dictionary of headers and data type to randomly generate", "additionProperties": true}}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.classify": {"type": "object", "description": "Read the training data for a Classify Wrangle", "additionalProperties": false, "required": ["model_id"], "properties": {"model_id": {"type": "string", "description": "Specific model to read"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.extract": {"type": "object", "description": "Read the training data for an Extract Wrangle", "additionalProperties": false, "required": ["model_id"], "properties": {"model_id": {"type": "string", "description": "Specific model to read"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.lookup": {"type": "object", "description": "Read the training data for a Lookup Wrangle", "additionalProperties": false, "required": ["model_id"], "properties": {"model_id": {"type": "string", "description": "Specific model to read"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.standardize": {"type": "object", "description": "Read the training data for a Standardize Wrangle", "additionalProperties": false, "required": ["model_id"], "properties": {"model_id": {"type": "string", "description": "Specific model to read"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "join": {"type": "object", "description": "Join two data sources on key(s). Equivalent to a join in SQL.", "required": ["how", "left_on", "right_on", "sources"], "properties": {"how": {"type": "string", "description": "Method of join", "enum": ["left", "right", "outer", "inner", "cross"]}, "left_on": {"type": ["string", "array"], "description": "Key(s) to join on from first source"}, "right_on": {"type": ["string", "array"], "description": "Key(s) to join on from second source"}, "sources": {"type": "array", "description": "Two data sources to be joined", "minItems": 2, "maxItems": 2, "items": {"$ref": "#/$defs/read/items"}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "union": {"type": "object", "description": "Combine two or more data sets together, stacked vertically. Equivalent to a union in SQL.", "required": ["sources"], "properties": {"sources": {"type": "array", "description": "The data sources to be combined", "minItems": 1, "items": {"$ref": "#/$defs/read/items"}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "concatenate": {"type": "object", "description": "Combine two or more data sets together, stacked horizontally.", "required": ["sources"], "properties": {"sources": {"type": "array", "description": "The data sources to be combined", "minItems": 1, "items": {"$ref": "#/$defs/read/items"}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}}}, "commonProperties": {"if": {"type": "string", "description": "Specify a condition to determine if this will execute or not. e.g. ${variable} == 1. Recipe variables ${variable} are parameterized and may be used within the statement."}}}, "wrangles": {"items": {"type": "object", "description": "Wrangle data to be how you need it to be", "additionProperties": false, "patternProperties": {"^custom\\..*": {"type": "object", "description": "Use custom functions"}, "^pandas\\..*": {"type": "object", "description": "Use pandas dataframe functions"}}, "properties": {"try": {"type": "object", "description": "Try a list of wrangles and catch any errors that occur", "required": ["wrangles"], "properties": {"wrangles": {"type": "array", "description": "List of wrangles to apply", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "except": {"type": ["object"], "description": "An action to take if the wrangles encounter an error.\nThis can contain a list of wrangles or a dictionary of column names and values.\nIf except is not provided, the error will be logged and the recipe will continue.", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "retries": {"type": "integer", "description": "Number of times to retry the wrangles if an error occurs. Default 0.", "minimum": 0}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "accordion": {"type": "object", "description": "Apply a series of wrangles to column(s) containing lists. The wrangles will be applied to each element in the list and the results will be returned back as a list.", "additionalProperties": false, "required": ["input", "wrangles"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "The column(s) containing the list(s) that the wrangles will be applied to the elements of."}, "propagate": {"type": ["string", "array"], "description": "Limit the column(s) that will be available to the wrangles and replicated for each element. If not specified, all columns will be propogated. This may be useful to limit the memory use for large datasets."}, "output": {"type": ["string", "array"], "description": "Output of the wrangles to save back to the dataframe."}, "wrangles": {"type": "array", "description": "List of wrangles to apply", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "batch": {"type": "object", "description": "Split the data into batches for executing a list of wrangles. Use this in situations such as where the intermediate data is too large to fit in memory.", "additionalProperties": false, "required": ["wrangles"], "properties": {"batch_size": {"type": "integer", "description": "The number of rows to split each batch into", "default": 1000}, "wrangles": {"type": "array", "description": "The wrangles to execute on the data. Each series of wrangles\nwill be run agaisnst the data in batches of the size\ndefined by batch_size.", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "threads": {"type": "integer", "description": "The number of threads to use for parallel processing. Default 1."}, "on_error": {"type": "object", "description": "A dictionary of column_name: value to return if an error occurs while attempting to run a batch"}, "timeout": {"type": "number", "description": "The number of seconds to wait for a batch to complete before raising an error"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "classify": {"type": "object", "description": "Run classify wrangles on the specified columns.\nRequires WrangleWorks Account and Subscription.\n", "required": ["input", "output", "model_id"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column."}, "model_id": {"type": "string", "description": "ID of the classification model to be used"}, "include_confidence": {"type": "boolean", "description": "For models that support it, include the confidence level in the output"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "clean_whitespaces": {"type": "object", "description": "Condense multiple spaces to a single space and convert special space characters to a standard space.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns."}, "trim": {"type": "boolean", "description": "Whether to trim leading and trailing spaces. Default True."}, "remove_literals": {"type": "boolean", "description": "Whether to remove special space characters such as new lines etc. Default True."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "compare.text": {"type": "object", "description": "Compare two strings and return the intersection or difference, or use overlap to find the matching characters between the two strings.", "required": ["input", "output", "method"], "properties": {"input": {"type": "array", "description": "the columns to compare. First column is the base column"}, "output": {"type": "string", "description": "The column to output the results to"}, "method": {"type": "string", "description": "The type of comparison to perform (difference, intersection, overlap)", "enum": ["difference", "intersection", "overlap"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}, "allOf": [{"if": {"properties": {"method": {"const": "difference"}}}, "then": {"properties": {"char": {"type": "string", "description": "(Optional) The character to split the strings on. Default is a space"}, "case_sensitive": {"type": "boolean", "description": "(Optional) Whether the comparison is case sensitive. Default is True"}}}}, {"if": {"properties": {"method": {"const": "intersection"}}}, "then": {"properties": {"char": {"type": "string", "description": "(Optional) The character to split the strings on. Default is a space"}, "case_sensitive": {"type": "boolean", "description": "(Optional) Whether the comparison is case sensitive. Default is True"}}}}, {"if": {"properties": {"method": {"const": "overlap"}}}, "then": {"properties": {"non_match_char": {"type": "string", "description": "(Optional) Character to use for non-matching characters"}, "include_ratio": {"type": "boolean", "description": "(Optional) Include the ratio of matching characters"}, "decimal_places": {"type": "integer", "description": "(Optional) Number of decimal places to round the ratio to"}, "exact_match": {"type": "string", "description": "(Optional) Value to use for exact matches"}, "empty_a": {"type": "string", "description": "(Optional) Value to use for empty input a"}, "empty_b": {"type": "string", "description": "(Optional) Value to use for empty input b"}, "all_empty": {"type": "string", "description": "(Optional) Value to use for both inputs"}, "case_sensitive": {"type": "boolean", "description": "(Optional) Whether the comparison is case sensitive. Default is True"}}}}]}, "concurrent": {"type": "object", "description": "Run multiple wrangles concurrently rather than sequentially. Wrangles must specify output columns to be used concurrently. When using concurrent, Wrangles may not complete in a predictable order and it is not recommended to update overlapping columns with different wrangles.", "additionalProperties": false, "required": ["wrangles"], "properties": {"wrangles": {"type": "array", "description": "The wrangles section of a recipe to execute for each combination of variables", "minItems": 1, "items": [{"$ref": "#/$defs/wrangles/items"}]}, "max_concurrency": {"type": "integer", "description": "The maximum number of wrangles to execute in parallel", "minimum": 1}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.case": {"type": "object", "description": "Change the case of the input.", "additionalProperties": false, "required": ["input", "case"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns"}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "case": {"type": "string", "description": "The case to convert to. lower, upper, title or sentence", "enum": ["lower", "upper", "title", "sentence"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.data_type": {"type": "object", "description": "Change the data type of the input.", "additionalProperties": false, "required": ["input", "data_type"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns"}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "data_type": {"type": "string", "description": "The new data type", "enum": ["str", "float", "int", "bool", "datetime"]}, "default": {"type": ["string", "number", "array", "boolean", "datetime"], "description": "Set the default value to return if the input data \ncannot be converted to the specified data_type."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.fraction_to_decimal": {"type": "object", "description": "Convert fractions to decimals", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output colum"}, "decimals": {"type": ["number"], "description": "Number of decimals to round fraction"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.from_json": {"type": "object", "description": "Convert a JSON representation into an object", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column. If omitted, the input column will be overwritten"}, "default": {"type": ["string", "array", "object", "number", "boolean", "null"], "description": "Value to return if the row is empty or fails to be parsed as JSON"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.from_yaml": {"type": "object", "description": "Convert a YAML representation into an object", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column. If omitted, the input column will be overwritten"}, "default": {"type": ["string", "array", "object", "number", "boolean", "null"], "description": "Value to return if the row is empty or fails to be parsed as JSON"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.to_json": {"type": "object", "description": "Convert an object to a JSON representation.", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column. If omitted, the input column will be overwritten"}, "indent": {"type": ["string", "integer"], "description": "If indent is a non-negative integer or string, then JSON array elements and object members will be pretty-printed  with that indent level. An indent level of 0, negative, or \"\" will only insert newlines. None (the default) selects the most  compact representation. Using a positive integer indent indents that many spaces per level. If indent is a string (such as '\\t'),  that string is used to indent each level."}, "sort_keys": {"type": "boolean", "description": "If sort_keys is true (defaults to False), then the output of dictionaries will be sorted by key."}, "ensure_ascii": {"type": "boolean", "description": "If true, non-ASCII characters will be escaped. Default is false"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "convert.to_yaml": {"type": "object", "description": "Convert an object to a YAML representation.", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column. If omitted, the input column will be overwritten"}, "indent": {"type": "integer", "description": "Specify the number of spaces for indentation to  specify nested elements"}, "sort_keys": {"type": "boolean", "description": "If sort_keys is true (default: False), then the output of dictionaries will be sorted by key."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "copy": {"type": "object", "description": "Make a copy of a column or a list of columns", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input columns or columns"}, "output": {"type": ["string", "array"], "description": "Name of the output columns or columns"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.bins": {"type": "object", "description": "Create a column that groups data into bins", "additionalProperties": false, "required": ["input", "output", "bins"], "properties": {"input": {"type": ["array"], "description": "Name of input column"}, "output": {"type": ["array"], "description": "Name of new column"}, "bins": {"type": ["integer", "array"], "description": "Defines the number of equal-width bins in the range"}, "labels": {"type": ["string", "array"], "description": "Labels for the returned bins"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.column": {"type": "object", "description": "Create column(s) with a user defined value. Defaults to None (empty).", "additionalProperties": false, "required": ["output"], "properties": {"output": {"type": ["string", "array"], "description": "Name or list of names of new columns or column_name: value pairs."}, "value": {"type": ["string", "number", "object", "array", "boolean"], "description": "(Optional) Value(s) to add in the new column(s). If using a dictionary in output, value can only be a string."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.embeddings": {"type": "object", "description": "Create an embedding based on text input.", "required": ["input", "api_key"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "The column of text to create the embeddings for."}, "output": {"type": ["string", "array"], "description": "The output column the embeddings will be saved as."}, "api_key": {"type": "string", "description": "The API key."}, "model": {"type": "string", "description": "The specific model to use to generate the embeddings."}, "batch_size": {"type": "integer", "description": "The number of rows to submit per individual request."}, "threads": {"type": "integer", "description": "The number of requests to submit in parallel. Each request contains the number of rows set as batch_size."}, "output_type": {"type": "string", "description": "Output the embeddings as a numpy array or a python list Default - python list.", "enum": ["numpy array", "python list"]}, "retries": {"type": "integer", "description": "The number of times to retry if the request fails. This will apply exponential backoff to help with rate limiting."}, "url": {"type": "string", "description": "Override the default url for the AI endpoint.\nMust use the OpenAI embeddings API."}, "precision": {"type": "string", "description": "The precision of the embeddings. Default is float32. This should be used with output_type numpy array.", "enum": ["float16", "float32"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.guid": {"type": "object", "description": "Create column(s) with a GUID.", "additionalProperties": false, "required": ["output"], "properties": {"output": {"type": ["string", "array"], "description": "Name or list of names of new columns"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.hash": {"type": "object", "description": "Create a hash of a column", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of input column"}, "output": {"type": ["string", "array"], "description": "Name of new column"}, "method": {"type": "string", "description": "The method to use to hash the input (Default: md5)", "enum": ["md5", "sha1", "sha256", "sha512"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.index": {"type": "object", "description": "Create column(s) with an incremental index. e.g. 1,2,3...", "additionalProperties": false, "required": ["output"], "properties": {"output": {"type": ["string", "array"], "description": "Name or list of names of new columns"}, "start": {"type": "integer", "description": "(Optional; default 1) Starting number for the index"}, "step": {"type": "integer", "description": "(Optional; default 1) Step between successive rows"}, "by": {"type": ["string", "array"], "description": "Optional. Cluster the created indexes by one or more columns"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.jinja": {"type": "object", "description": "Output text using a jinja template", "additionalProperties": false, "required": ["output", "template"], "properties": {"input": {"type": ["string", "integer"], "description": "Specify a name of column containing a dictionary of elements to be used in jinja template.\nOtherwise, the column headers will be used as keys.\n"}, "output": {"type": "string", "description": "Name of the column to be output to."}, "template": {"type": "object", "description": "A dictionary which defines the template/location as well as the form which the template is input.\nIf any keys use a space, they must be replaced with an underscore.  Note: spaces within column names\nare replaced by underscores (_).\n", "additionalProperties": false, "properties": {"file": {"type": "string", "description": "A .jinja file containing the template"}, "column": {"type": "string", "description": "A column containing the jinja template - this will apply to the corresponding row."}, "string": {"type": "string", "description": "A string which is used as the jinja template"}}}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "create.uuid": {"type": "object", "description": "Create column(s) with a UUID.", "additionalProperties": false, "required": ["output"], "properties": {"output": {"type": ["string", "array"], "description": "Name or list of names of new columns"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "date_calculator": {"type": "object", "description": "Add or Subtract time from a date", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer"], "description": "Name of the dates column"}, "operation": {"type": "string", "description": "Date operation", "enum": ["add", "subtract"]}, "output": {"type": "string", "description": "Name of the output column of dates"}, "time_unit": {"type": "string", "description": "time unit for operation", "enum": ["years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds"]}, "time_value": {"type": "number", "description": "time unit value for operation"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "drop": {"type": "object", "description": "Drop (Delete) selected column(s)", "additionalProperties": true, "required": ["columns"], "properties": {"columns": {"type": ["array", "string"], "description": "Name of the column(s) to drop"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}}}, "explode": {"type": "object", "description": "Explode a column of lists into rows", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column(s) to explode. If multiple columns are included they must contain lists of the same length"}, "reset_index": {"type": "boolean", "description": "Reset the index after exploding. Default True."}, "drop_empty": {"type": "boolean", "description": "If true, any rows that contain an empty list will be dropped.\nIf false, rows that contain empty lists will keep 1 row with an empty value.\nDefault False."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.address": {"type": "object", "description": "Extract parts of addresses. Requires WrangleWorks Account.", "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column."}, "dataType": {"type": "string", "description": "Specific part of the address to extract", "enum": ["streets", "cities", "regions", "countries"]}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.ai": {"type": "object", "description": "Extract data using an AI model.", "additionalProperties": false, "required": ["output", "api_key"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns to give to the AI\nto use to determine the output. If not specified, all\ncolumns will be used."}, "output": {"type": ["object", "string", "array"], "description": "List and description of the output you want", "patternProperties": {"^[a-zA-Z0-9 _-]+$": {"type": ["object", "string"], "properties": {"type": {"type": "string", "description": "The type of data you'd like the model to return.", "enum": ["string", "number", "integer", "boolean", "null", "object", "array"]}, "description": {"type": "string", "description": "Description of the output you'd like the model to return."}, "enum": {"type": "array", "description": "List of possible values for the output."}, "default": {"type": ["string", "number", "integer", "boolean", "null", "object", "array"], "description": "A default value to return."}, "examples": {"type": "array", "description": "Provide examples of typical values to return."}}}}}, "api_key": {"type": "string", "description": "API Key for the model"}, "model": {"type": "string", "description": "The name of the AI model to use"}, "threads": {"type": "integer", "description": "The number of requests to send in parallel"}, "timeout": {"type": "integer", "description": "The number of seconds to wait for a response before timing out"}, "retries": {"type": "integer", "description": "The number of times to retry if the request fails. This will apply exponential backoff to help with rate limiting."}, "url": {"type": "string", "description": "Override the default url for the AI endpoint.\nMust use the OpenAI chat completions API."}, "messages": {"type": ["string", "array"], "description": "Optional. Provide additional overall instructions for the AI."}, "model_id": {"type": "string", "description": "Use a saved definition from an extract ai wrangle."}, "strict": {"type": "boolean", "description": "Enable strict mode. Default False. If True, the function will be required to match the schema, but may be more limited in the schema it can return."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.attributes": {"type": "object", "description": "Extract numeric attributes from the input such as weights or lengths. Requires WrangleWorks Account.", "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column."}, "attribute_type": {"type": "string", "description": "Request only a specific type of attribute", "enum": ["angle", "area", "capacitance", "charge", "current", "data transfer rate", "electrical conductance", "electrical resistance", "energy", "force", "frequency", "inductance", "instance frequency", "length", "luminous flux", "weight", "power", "pressure", "speed", "velocity", "temperature", "time", "voltage", "volume", "volumetric flow"]}, "responseContent": {"type": "string", "description": "span - returns the text found. object - returns an object with the value and unit", "enum": ["span", "object"]}, "bound": {"type": "string", "description": "When returning an object, if the input is a range (e.g. 10-20mm) set the value to return. min, mid or max. Default mid.", "enum": ["min", "mid", "max"]}, "desired_unit": {"type": "string", "description": "Convert the extracted unit to the desired unit"}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}, "$ref": "#/$defs/misc/unit_entity_map"}, "extract.brackets": {"type": "object", "description": "Extract text properties in brackets from the input", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output columns"}, "find": {"type": ["string", "array"], "description": "(Optional) The type of brackets to find (round '()', square '[]', curly '{}', angled '<>'). Default is all brackets."}, "include_brackets": {"type": "boolean", "description": "(Optional) Include the brackets in the output"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.codes": {"type": "object", "description": "Extract alphanumeric codes from the input. Requires WrangleWorks Account.", "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "min_length": {"type": ["integer", "string"], "description": "Minimum length of allowed results"}, "max_length": {"type": ["integer", "string"], "description": "Maximum length of allowed results"}, "strategy": {"type": "string", "description": "How aggressive to be at removing false positives such as measurements.", "enum": ["lenient", "balanced", "strict"]}, "sort_order": {"type": "string", "description": "Default is as found in the input. Also allows longest or shortest.", "enum": ["longest", "shortest"]}, "disallowed_patterns": {"type": "string", "description": "A pattern or JSON array of regex patterns to not include in the found codes"}, "include_multi_part_tokens": {"type": "boolean", "description": "Whether to include multi-part tokens that have a space. Default True."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.custom": {"type": "object", "description": "Extract data from the input using a DIY or bespoke extraction wrangle. Requires WrangleWorks Account and Subscription.", "required": ["input", "model_id"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "model_id": {"type": ["string", "array"], "description": "The ID of the wrangle to use"}, "use_labels": {"type": "boolean", "description": "Use Labels in the extract output {label: value}"}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "case_sensitive": {"type": "boolean", "description": "Allows the wrangle to be case sensitive if set to True, default is False."}, "extract_raw": {"type": "boolean", "description": "Extract the raw data from the wrangle"}, "use_spellcheck": {"type": "boolean", "description": "Use spellcheck to also find minor mispellings compared to the reference data"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.date_properties": {"type": "object", "description": "Extract date properties from a date (day, month, year, etc...)", "additionalProperties": false, "required": ["input", "property"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output columns"}, "property": {"type": "string", "description": "Property to extract from date", "enum": ["day", "day_of_year", "month", "month_name", "weekday", "week_day_name", "week_year", "quarter"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.date_range": {"type": "object", "description": "Extract date range frequency from two dates", "additionalProperties": false, "required": ["start_time", "end_time", "output", "range"], "properties": {"start_time": {"type": "string", "description": "Name of the start date column"}, "end_time": {"type": "string", "description": "Name of the end date column"}, "output": {"type": "string", "description": "Name of the output column"}, "range": {"type": "string", "description": "Type of frequency to count", "enum": ["business days", "days", "weeks", "months", "semi months", "business month ends", "month starts", "semi month starts", "business month starts", "quarters", "quarter starts", "years", "business hours", "hours", "minutes", "seconds", "milliseconds"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.html": {"type": "object", "description": "Extract elements from strings containing html. Requires WrangleWorks Account.", "required": ["input", "output", "data_type"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "data_type": {"type": "string", "description": "The type of data to extract", "enum": ["text", "links"]}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.properties": {"type": "object", "description": "Extract text properties from the input. Requires WrangleWorks Account.", "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output columns"}, "property_type": {"type": "string", "description": "The specific type of properties to extract", "enum": ["Colours", "Materials", "Shapes", "Standards"]}, "return_data_type": {"type": "string", "description": "The format to return the data, as a list or as a string", "enum": ["list", "string"]}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "extract.regex": {"type": "object", "description": "Extract matches or specific capture groups using regex", "additionalProperties": false, "required": ["input", "output", "find"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column(s)."}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)."}, "find": {"type": "string", "description": "Pattern to find using regex"}, "output_pattern": {"type": "string", "description": "Specifies the format to output matches and specific capture groups using backreferences (e.g., \\1, \\2). Default is to return entire matches. Example - For a regex pattern r'(\\d+)\\s(\\w+)' and output_pattern = '\\2 \\1', with input '120 volt', the output would be 'volt 120'."}, "first_element": {"type": "boolean", "description": "Get the first element from results"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "filter": {"type": "object", "description": "Filter the dataframe based on the contents.\nIf multiple filters are specified, all must be correct.\nFor complex filters, use the where parameter.", "additionalProperties": false, "properties": {"where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}, "input": {"type": ["string", "integer", "array"], "description": "Name of the column to filter on.\nIf multiple are provided, all must match the criteria."}, "equal": {"type": ["string", "array", "boolean", "number"], "description": "Select rows where the values equal a given value."}, "not_equal": {"type": ["string", "array", "boolean", "number"], "description": "Select rows where the values do not equal a given value."}, "is_in": {"type": ["array", "string"], "description": "Select rows where the values are in a given list."}, "not_in": {"type": ["array", "string"], "description": "Select rows where the values are not in a given list."}, "is_null": {"type": "boolean", "description": "If true, select all rows where the value is NULL. If false, where is not NULL."}, "greater_than": {"type": ["integer", "number"], "description": "Select rows where the values are greater than a specified value. Does include the value itself."}, "greater_than_equal_to": {"type": ["integer", "number"], "description": "Select rows where the values are greater than a specified value. Does include the value itself."}, "less_than": {"type": ["integer", "number"], "description": "Select rows where the values are less than a specified value. Does not include the value itself."}, "less_than_equal_to": {"type": ["integer", "number"], "description": "Select rows where the values are less than a specified value. Does include the value itself."}, "between": {"type": ["array"], "description": "Value or list of values to filter that are in between two parameter values"}, "contains": {"type": "string", "description": "Select rows where the input contains the value. Allows regular expressions."}, "not_contains": {"type": "string", "description": "Select rows where the input does not contain the value. Allows regular expressions."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}}}, "format.dates": {"type": "object", "description": "Format a date", "additionalProperties": false, "required": ["input", "format"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "format": {"type": ["string"], "description": "String pattern to format date"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.pad": {"type": "object", "description": "Pad a string to a fixed length", "additionalProperties": false, "required": ["input", "pad_length", "side", "char"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "pad_length": {"type": ["number"], "description": "Length for the output"}, "side": {"type": ["string"], "description": "Side from which to fill resulting string"}, "char": {"type": ["string"], "description": "The character to pad the input with"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.prefix": {"type": "object", "description": "Add a prefix to a column", "additionalProperties": false, "required": ["input", "value"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "value": {"type": ["string", "number"], "description": "Prefix value to add"}, "output": {"type": ["string", "array"], "description": "(Optional) Name of the output column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.remove_duplicates": {"type": "object", "description": "Remove duplicates from a list. Preserves input order.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "ignore_case": {"type": "boolean", "description": "Ignore case when removing duplicates"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.significant_figures": {"type": "object", "description": "Format a value to a specific number of significant figures", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "significant_figures": {"type": ["integer"], "description": "Number of significant figures to format to. Default is 3."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.suffix": {"type": "object", "description": "Add a suffix to a column", "additionalProperties": false, "required": ["input", "value"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "value": {"type": ["string", "number"], "description": "Suffix value to add"}, "output": {"type": ["string", "array"], "description": "(Optional) Name of the output column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "format.trim": {"type": "object", "description": "Remove excess whitespace at the start and end of text.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "huggingface": {"type": "object", "description": "Use a model from huggingface", "required": ["input", "api_token", "model"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column."}, "output": {"type": ["string", "array"], "description": "Name of the output column. If not provided, will overwrite the input column\n"}, "model": {"type": "string", "description": "Name of the model to use. e.g. facebook/bart-large-cnn"}, "api_token": {"type": "string", "description": "Huggingface API Token"}, "parameters": {"type": "object", "description": "Optionally, provide additional parameters to define the model behaviour"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "log": {"type": "object", "description": "Log the current status of the dataframe.", "additionalProperties": false, "properties": {"columns": {"type": "array", "description": "(Optional, default all columns) List of specific columns to log."}, "write": {"type": "array", "description": "(Optional) Allows for an intermediate output to a file/dataframe/database etc.", "minItems": 1, "items": {"$ref": "#/$defs/write/items"}}, "error": {"type": "string", "description": "Log an error to the console"}, "warning": {"type": "string", "description": "Log a warning to the console"}, "info": {"type": "string", "description": "Log info to the console"}, "log_data": {"type": "boolean", "description": "Whether to log a sample of the contents of the dataframe. Default True if not logging to a write, error, warning or info. Default False otherwise."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "lookup": {"type": "object", "description": "Lookup values from a saved lookup wrangle", "required": ["input", "model_id"], "properties": {"input": {"type": ["string", "integer"], "description": "Name of the column(s) to lookup."}, "model_id": {"type": "string", "description": "The model_id to use lookup against"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "math": {"type": "object", "description": "Apply a mathematical calculation.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["string", "integer"], "description": "The mathematical expression using column names. e.g. column1 * column2\n+ column3.  Note: spaces within column names are replaced by underscores (_).\n"}, "output": {"type": "string", "description": "The column to output the results to"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "matrix": {"type": "object", "description": "Apply a matrix of wrangles to the dataframe.\nThis will run the wrangles for each combination of the variables.", "required": ["variables", "wrangles"], "properties": {"variables": {"type": "object", "description": "A dictionary of variables to pass to the wrangle.\nThe key is the variable name and the value is a list of values."}, "wrangles": {"type": "array", "description": "The wrangles to apply to the dataframe.\nEach wrangle will be run for each combination of the variables.", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "strategy": {"type": "string", "enum": ["permutations", "loop"], "description": "Determines how to combine variables when there are multiple. loop (default) iterates over each set of variables, repeating shorter lists  until the longest is completed. permutations uses the combination of all  variables against all other variables."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.coalesce": {"type": "object", "description": "Take the first non-empty value from a series of columns or lists.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["array", "string", "integer"], "description": "List of input columns or a single column containing lists"}, "output": {"type": "string", "description": "Name of the output columns. This is required if multiple input columns are provided."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.concatenate": {"type": "object", "description": "Concatenate a list of columns or a list within a single column.", "additionalProperties": false, "required": ["input", "output", "char"], "properties": {"input": {"type": ["array", "string", "integer"], "description": "Either a single column name or list of columns"}, "output": {"type": "string", "description": "Name of the output column"}, "char": {"type": "string", "description": "(Optional) Character to add between successive values"}, "skip_empty": {"type": "boolean", "desription": "Whether to skip empty values", "default": false}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.dictionaries": {"type": "object", "description": "Take dictionaries in multiple columns and merge them to a single dictionary.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": "array", "description": "list of input columns"}, "output": {"type": "string", "description": "Name of the output column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.key_value_pairs": {"type": "object", "description": "Create a dictionary from keys and values in paired columns e.g. COLUMN_NAME_1, COLUMN_VALUE_1, COLUMN_NAME_2, COLUMN_VALUE_2 ...", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": "object", "description": "Matched pairs of key and value columns"}, "output": {"type": "string", "description": "Name of the output column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.lists": {"type": "object", "description": "Take lists in multiple columns and merge them to a single list.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": "array", "description": "List of input columns"}, "output": {"type": "string", "description": "Name of the output column"}, "remove_duplicates": {"type": "boolean", "description": "Whether to remove duplicates from the created list"}, "ignore_case": {"type": "boolean", "description": "Ignore case when removing duplicates"}, "include_empty": {"type": "boolean", "description": "Whether to include empty values in the created list"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.to_dict": {"type": "object", "description": "Take multiple columns and merge them to a dictionary (aka object) using the column headers as keys.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["array", "string", "integer"], "description": "List of input columns"}, "output": {"type": "string", "description": "Name of the output column"}, "include_empty": {"type": "boolean", "description": "Whether to include empty columns in the created dictionary"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "merge.to_list": {"type": "object", "description": "Take multiple columns and merge them to a list.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["array", "string", "integer"], "description": "List of input columns"}, "output": {"type": "string", "description": "Name of the output column"}, "include_empty": {"type": "boolean", "description": "Whether to include empty columns in the created list"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "python": {"type": "object", "description": "Apply a simple single-line python command. For more complex python use a custom function.\nNote, this evaluates the python command - be especially cautious including\nvariables from untrusted sources within the command string.\nThe python command will be evaluated once for each row and the result returned.\nReference column values by using their name.\nNon-alphanumeric characters within column names are replaced by underscores (_)\nAdditionally, all columns are available as a dict named kwargs.\nAdditional parameters set for the wrangle will also be available to the command.", "required": ["command", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input column(s) to filter the data available\nto the command. Useful in conjunction with kwargs to target\na variable range of columns.\nIf not specified, all columns will be available."}, "output": {"type": ["string", "array"], "description": "Name or list of output column(s). To output multiple columns,\nreturn a list of the corresponding length."}, "command": {"type": "string", "description": "Python command. This must return a value.\nNote: any non-alphanumeric characters in variable names\nare replaced by underscores (_)."}, "except": {"type": ["string", "array", "number", "integer", "boolean", "object"], "description": "Value to return for the row if an exception occurs during the evaluation.\nIf not provided, an exception will be raised as normal.\nIf multiple output columns are specified, this must match the length."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "recipe": {"anyOf": [{"$ref": "#"}, {"type": "object", "description": "Run a recipe as a Wrangle. Recipe-ception,", "additionalProperties": false, "required": ["name"], "properties": {"name": {"type": "string", "description": "file name of the recipe"}, "variables": {"type": "object", "description": "A dictionary of variables to pass to the recipe"}}}], "properties": {"if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "reindex": {"type": "object", "description": "Changes the row labels and column labels of a DataFrame.", "additionalProperties": false, "properties": {"labels": {"type": "array", "description": "New labels / index to conform the axis specified by \u2018axis\u2019 to."}, "index": {"type": "array", "description": "New labels for the index. Preferably an Index object to avoid duplicating data."}, "columns": {"type": "array", "description": "New labels for the columns. Preferably an Index object to avoid duplicating data."}, "axis": {"type": ["number", "string"], "description": "Axis to target. Can be either the axis name (\u2018index\u2019, \u2018columns\u2019) or number (0, 1)."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}}}, "remove_words": {"type": "object", "description": "Remove all the elements that occur in one list from another.", "additionalProperties": false, "required": ["input", "to_remove", "output"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of column to remove words from"}, "to_remove": {"type": "array", "description": "Column or list of columns with a list of words to be removed"}, "output": {"type": ["string", "array"], "description": "Name of the output columns"}, "tokenize_to_remove": {"type": "boolean", "description": "Tokenize all to_remove inputs"}, "ignore_case": {"type": "boolean", "description": "Ignore input and to_remove case"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "rename": {"type": "object", "description": "Rename a column or list of columns.", "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns."}, "wrangles": {"type": "array", "description": "Use wrangles to transform the column names.\nThe input is named 'columns' and the final result\nmust also include the column named 'columns'.\nThis can only be used instead of the standard rename.", "minItems": 1, "items": {"$ref": "#/$defs/wrangles/items"}}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}}}, "replace": {"type": "object", "description": "Quick find and replace for simple values. Can use regex in the find field.", "additionalProperties": false, "required": ["input", "find", "replace"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input column"}, "output": {"type": ["string", "array"], "description": "Name or list of output column"}, "find": {"type": "string", "description": "Pattern to find using regex"}, "replace": {"type": "string", "description": "Value to replace the pattern found"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "round": {"type": "object", "description": "Round column(s) to the specified decimals", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column(s)"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "decimals": {"type": "number", "description": "Number of decimal places to round column"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.columns": {"type": "object", "description": "Select columns from the dataframe", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column(s) to select"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.dictionary_element": {"type": "object", "description": "Select one or more element of a dictionary.", "additionalProperties": false, "required": ["input", "element"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column. If omitted, the input column will be replaced."}, "element": {"type": ["string", "array"], "description": "The key or keys from the dictionary to select.\nIf a single key is provided, the value will be returned\nIf a lists of keys are selected,\nthe result will be a new dictionary."}, "default": {"type": ["string", "number", "array", "object", "boolean", "null"], "description": "Set the default value to return if the specified element doesn't exist.\nIf selecting multiple elements, a dict of defaults can be set."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.element": {"type": "object", "description": "Select elements of lists or dicts using python syntax like col[0]['key']", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column and sub elements This permits by index for lists or dict and by key for dicts e.g. col[0]['key'] // [{\"key\":\"val\"}] -> \"val\""}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "default": {"type": ["string", "number", "array", "object", "boolean"], "description": "Set the default value to return if the specified element doesn't exist.", "default": ""}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.group_by": {"type": "object", "description": "Group and aggregate the data", "properties": {"by": {"type": ["string", "array"], "description": "List of the input columns to group on"}, "list": {"type": ["string", "array"], "description": "Group and return all values for these column(s) as a list"}, "first": {"type": ["string", "array"], "description": "The first value for these column(s)"}, "last": {"type": ["string", "array"], "description": "The last value for these column(s)"}, "min": {"type": ["string", "array"], "description": "The minimum value for these column(s)"}, "max": {"type": ["string", "array"], "description": "The maximum value for these column(s)"}, "mean": {"type": ["string", "array"], "description": "The mean (average) value for these column(s)"}, "median": {"type": ["string", "array"], "description": "The median value for these column(s)"}, "nunique": {"type": ["string", "array"], "description": "The count of unique values for these column(s)"}, "count": {"type": ["string", "array"], "description": "The count of values for these column(s)"}, "std": {"type": ["string", "array"], "description": "The standard deviation of values for these column(s)"}, "sum": {"type": ["string", "array"], "description": "The total of values for these column(s)"}, "any": {"type": ["string", "array"], "description": "Return true if any of the values for these column(s) are true"}, "all": {"type": ["string", "array"], "description": "Return true if all of the values for these column(s) are true"}, "p75": {"type": ["string", "array"], "description": "Get a percentile. Note, you can use any integer here for the corresponding percentile."}, "custom.placeholder": {"type": ["string", "array"], "description": "Placeholder for custom functions. Replace 'placeholder' with the name of the function."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.head": {"type": "object", "description": "Return the first n rows", "required": ["n"], "properties": {"n": {"type": "integer", "description": "Number of rows to return"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.highest_confidence": {"type": "object", "description": "Select the option with the highest confidence from multiple columns. Inputs are expected to be of the form [<<value>>, <<confidence_score>>].", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": "array", "description": "List of the input columns to select from"}, "output": {"type": ["array", "string"], "description": "If two columns; the result and confidence. If one column; [result, confidence]"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.left": {"type": "object", "description": "Return characters from the left of text. Strings shorter than the length defined will be unaffected.", "additionalProperties": false, "required": ["input", "length"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column(s) to edit"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "length": {"type": "integer", "description": "Number of characters to include from the left. If negative, this will remove the specified number of characters from the left. May not equal 0."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.length": {"type": "object", "description": "Calculate the lengths of data in a column. The length depends on the data type e.g. text will be the length of the text, lists will be the number of elements in the list.", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column(s)."}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.list_element": {"type": "object", "description": "Select a numbered element of a list (zero indexed).", "additionalProperties": false, "required": ["input", "element"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the input column"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "element": {"type": "integer", "description": "The numbered element of the list to select.\nStarts from zero.\nThis may use python slicing syntax to select a subset of the list."}, "default": {"type": ["string", "number", "array", "object", "boolean", "null"], "description": "Set the default value to return if the specified element doesn't exist."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.right": {"type": "object", "description": "Return characters from the right of text. Strings shorter than the length defined will be unaffected.", "additionalProperties": false, "required": ["input", "length"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column(s) to edit"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "length": {"type": "integer", "description": "Number of characters to include from the right. If negative, this will remove the specified number of characters from the right. May not equal 0."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.sample": {"type": "object", "description": "Return a random sample of the rows", "required": ["rows"], "properties": {"rows": {"type": ["integer", "number"], "description": "If a whole number, will select that number of rows.\nIf a decimal between 0 and 1 will select that fraction \nof the rows e.g. 0.1 => 10% of rows will be returned", "exclusiveMinimum": 0}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.substring": {"type": "object", "description": "Return characters from the middle of text.", "additionalProperties": false, "required": ["input", "start", "length"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column(s) to edit"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)"}, "start": {"type": "integer", "description": "The position of the first character to select.\nIf ommited will start from the beginning and length must \nbe provided.\n", "minimum": 1}, "length": {"type": "integer", "description": "The length of the string to select. If ommited\nwill select to the end of the string and start must be provided.\n", "minimum": 1}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.tail": {"type": "object", "description": "Return the last n rows", "required": ["n"], "properties": {"n": {"type": "integer", "description": "Number of rows to return"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "select.threshold": {"type": "object", "description": "Select the first option if it exceeds a given threshold, else the second option.", "additionalProperties": false, "required": ["input", "output", "threshold"], "properties": {"input": {"type": "array", "description": "List of the input columns to select from"}, "output": {"type": "string", "description": "Name of the output column"}, "threshold": {"type": "number", "description": "Threshold above which to choose the first option, otherwise the second", "minimum": 0, "maximum": 1}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "similarity": {"type": "object", "description": "Calculate the cosine similarity of two vectors", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": "array", "description": "Two columns of vectors to compare the similarity of.", "minItems": 2, "maxItems": 2}, "output": {"type": "string", "description": "Name of the output column."}, "method": {"type": "string", "description": "The type of similarity to calculate (cosine or euclidean). Adjusted cosine adjusts the default cosine calculation to cover a range of 0-1 for typical comparisons.", "enum": ["cosine", "adjusted cosine", "euclidean"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "sort": {"type": "object", "description": "Sort the data", "additionalProperties": true, "required": ["by"], "properties": {"by": {"type": ["string", "array"], "description": "Name or list of the column(s) to sort by"}, "ascending": {"type": ["boolean", "array"], "items": {"type": "boolean"}, "description": "Sort ascending vs. descending. Specify a list to sort multiple columns in different orders. If this is a list of bools then it must match the length of the by."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "split.dictionary": {"type": "object", "description": "Split one or more dictionaries into columns.\nThe dictionary keys will be returned as the new column headers.\nIf the dictionaries contain overlapping values, the last value will be returned.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or lists of the column(s) containing dictionaries to be split.\nIf providing multiple dictionaries and the dictionaries\ncontain overlapping values, the last value will be returned."}, "output": {"type": ["string", "array"], "description": "(Optional) Subset of keys to extract from the dictionary.\nIf not provided, all keys will be returned.\nColumns can be renamed with the following syntax:\noutput:\n  - key1: new_column_name1\n  - key2: new_column_name2"}, "default": {"type": "object", "description": "Provide a set of default headings and values if they are not found within the input"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "split.list": {"type": "object", "description": "Split a list in a single column to multiple columns.", "additionalProperties": false, "required": ["input", "output"], "properties": {"input": {"type": ["string", "int"], "description": "Name of the column to be split"}, "output": {"type": ["string", "array"], "description": "Name of column(s) for the results. If providing a single column, use a wildcard (*) to indicate a incrementing integer"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "split.text": {"type": "object", "description": "Split a string to multiple columns or a list.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": "string", "description": "Name of the column to be split"}, "output": {"type": ["string", "array"], "description": "Name of the output column(s)\nIf a single column is provided,\nthe results will be returned as a list\nIf multiple columns are listed,\nthe results will be separated into the columns.\nIf omitted, will overwrite the input."}, "char": {"type": "string", "description": "Set the character(s) to split on.\nDefault comma (,)\nCan also prefix with \"regex:\" to split on a pattern."}, "pad": {"type": "boolean", "description": "Choose whether to pad to ensure a consistent length. Default true if outputting to columns, false for lists."}, "element": {"type": ["integer", "string"], "description": "Select a specific element or range after splitting using slicing syntax. e.g. 0, \":5\", \"5:\", \"2:8:2\""}, "inclusive": {"type": "boolean", "description": "If true, include the split character in the output. Default False"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "split.tokenize": {"type": "object", "description": "Split text into tokens. A variety of methods are available. The default method is to split on spaces.", "additionalProperties": false, "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Column(s) to be split into tokens"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "method": {"anyOf": [{"type": "string", "enum": ["space", "boundary", "boundary_ignore_space"], "description": "Method to split the list. Options: space, boundary, boundary_ignore_space or use a custom function with custom.<function> or use a regex pattern with regex:<pattern>"}, {"type": "string", "description": "Method to split the list. Options: space, boundary, boundary_ignore_space or use a custom function with custom.<function> or use a regex pattern with regex:<pattern>"}]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "sql": {"type": "object", "description": "Apply a SQL command to the current dataframe. Only SELECT statements are supported - the result will be the output.", "additionalProperties": false, "required": ["command"], "properties": {"command": {"type": "string", "description": "SQL Command. The table is called df. For specific SQL syntax, this uses the SQLite dialect."}, "params": {"type": ["array", "object"], "description": "Variables to use in conjunctions with query.\nThis allows the query to be parameterized.\nThis uses sqlite syntax (? or :name)"}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "standardize": {"type": "object", "description": "Standardize data using a DIY or bespoke standardization wrangle. Requires WrangleWorks Account and Subscription.", "required": ["input"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name or list of input columns."}, "output": {"type": ["string", "array"], "description": "Name or list of output columns"}, "model_id": {"type": ["string", "array"], "description": "The ID of the wrangle to use (do not include 'find' and 'replace')"}, "case_sensitive": {"type": "boolean", "description": "Allows the wrangle to be case sensitive if set to True, default is False."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "translate": {"type": "object", "description": "Translate the input to a different language. Requires WrangleWorks Account and DeepL API Key (A free account for up to 500,000 characters per month is available).", "additionalProperties": false, "required": ["input", "output", "target_language"], "properties": {"input": {"type": ["string", "integer", "array"], "description": "Name of the column to translate"}, "output": {"type": ["string", "array"], "description": "Name of the output column"}, "target_language": {"type": "string", "description": "Code of the language to translate to", "enum": ["Bulgarian", "Chinese", "Czech", "Danish", "Dutch", "English (American)", "English (British)", "Estonian", "Finnish", "French", "German", "Greek", "Hungarian", "Italian", "Japanese", "Latvian", "Lithuanian", "Polish", "Portuguese", "Portuguese (Brazilian)", "Romanian", "Russian", "Slovak", "Slovenian", "Spanish", "Swedish"]}, "source_language": {"type": "string", "description": "Code of the language to translate from. If omitted, automatically detects the input language", "enum": ["Auto", "Bulgarian", "Chinese", "Czech", "Danish", "Dutch", "English", "Estonian", "Finnish", "French", "German", "Greek", "Hungarian", "Italian", "Japanese", "Latvian", "Lithuanian", "Polish", "Portuguese", "Romanian", "Russian", "Slovak", "Slovenian", "Spanish", "Swedish"]}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}, "transpose": {"type": "object", "description": "Transpose the DataFrame (swap columns to rows)", "additionalProperties": false, "properties": {"header_column": {"type": ["string", "integer", null], "description": "Name or position of the column that will be used as the column headings for the transposed DataFrame. Default 0 (first column). Use header_column = null to not use any column as header."}, "if": {"$ref": "#/$defs/wrangles/commonProperties/if"}, "where": {"$ref": "#/$defs/wrangles/commonProperties/where_special"}, "where_params": {"$ref": "#/$defs/wrangles/commonProperties/where_params"}}}}}, "commonProperties": {"where": {"type": "string", "description": "Filter the data to only apply the wrangle to certain rows using an equivalent to a SQL where criteria, such as column1 = 123 OR column2 = 'abc'"}, "where_special": {"type": "string", "description": "Filter the data prior to transforming it using a SQL-style where criteria, such as column1 = 123 OR column2 = 'abc'\nNote: due to the nature of this wrangle, this will remove rows from the output."}, "where_params": {"type": ["array", "object"], "description": "Variables to use in conjunctions with where. This allows the query to be parameterized. This uses sqlite syntax (? or :name)"}, "if": {"type": "string", "description": "Specify a condition to determine if this will execute or not. e.g. ${variable} == 1. Recipe variables ${variable} are parameterized and may be used within the statement. Additional variables 'columns', 'row_count', 'column_count' and 'df' (the entire dataframe) are available."}}}, "write": {"items": {"type": "object", "description": "Define targets to export data to", "additionProperties": false, "patternProperties": {"^custom\\..*": {"type": "object", "description": "Use custom functions."}}, "properties": {"akeneo": {"type": "object", "description": "Write data into an Akeneo PIM", "required": ["host", "user", "password", "client_id", "client_secret", "source"], "properties": {"host": {"type": "string", "description": "Hostname of the Akeneo PIM instance\ne.g. https://akeneo.example.com\n"}, "user": {"type": "string", "description": "User with access to write the data"}, "password": {"type": "string", "description": "Password for the user"}, "client_id": {"type": "string", "description": "Client ID. These need to be generated in the PIM.\nSee https://api.akeneo.com/documentation/authentication.html\n"}, "client_secret": {"type": "string", "description": "Client Secret"}, "source": {"type": "string", "description": "Type of data to write", "enum": ["products", "products-uuid", "product-models", "families", "attributes", "attribute-groups", "association-types", "categories", "channels", "measurement-families"]}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "ckan": {"type": "object", "description": "Write a file to a dataset in CKAN", "required": ["host", "api_key", "dataset", "file"], "properties": {"host": {"type": "string", "description": "The host name of the CKAN site. e.g. https://data.example.com"}, "api_key": {"type": "string", "description": "API Key for the CKAN site."}, "dataset": {"type": "string", "description": "The name of the dataset. This should be the url version e.g. my-dataset"}, "file": {"type": "string", "description": "The name of the specific file within the dataset. e.g. example.csv"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "concurrent": {"type": "object", "description": "The concurrent connector lets you run multiple write connectors in parallel rather than sequentially", "required": ["write"], "properties": {"write": {"type": "array", "description": "Writes to run concurrently", "minItems": 1, "items": [{"$ref": "#/$defs/write/items"}]}, "max_concurrency": {"type": "integer", "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued.", "minimum": 1}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "excel.sheet": {"type": "object", "description": "Write to an excel sheet", "additionalProperties": false, "properties": {"name": {"type": "string", "description": "Name of the sheet to write to. If omitted, will default to the name of the recipe."}, "cell": {"type": "string", "description": "The top left cell to write the data from. Default A1."}, "action": {"type": "string", "description": "Action to take when writing the data if the sheet already exists. Default append.\nappend - add to the existing sheet.\nincrement - add a new sheet with an incrementing number.\noverwrite - replace existing sheet.", "enum": ["overwrite", "append", "increment"]}, "freezepanes": {"type": "boolean", "description": "If true, will freeze the first row. Default false."}, "as_table": {"type": "boolean", "description": "If true, will write the data as an Excel table. Default true."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "file": {"type": "object", "description": "Export data to a file", "required": ["name"], "properties": {"name": {"type": "string", "description": "The name of the file to write."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "orient": {"type": "string", "description": "Used for JSON files. Specifies the output arrangement", "enum": ["split", "records", "index", "columns", "values"]}, "sheet_name": {"type": "string", "description": "Used for Excel files. Specify the sheet to write."}, "sep": {"type": "string", "description": "Used for CSV files. Set the separation character. Default , (comma)"}, "encoding": {"type": "string", "description": "Used for CSV files. Set the encoding used for the file. Default utf-8"}, "mode": {"type": "string", "description": "Used for CSV files. Set whether to append to (a) or overwrite (w) the file if it already exists. Default w - overwrite", "enum": ["w", "a"]}, "decimal": {"type": "string", "description": "Used for CSV files. Character to use as the decimal point (e.g. ',' for European data)."}, "header": {"type": ["boolean", "array"], "description": "Used for CSV files. Whether to write the column headers. Default true. Alternatively, provide a list to overwrite the headings."}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "http": {"type": "object", "description": "Write data to a HTTP endpoint.", "required": ["url"], "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default POST.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "orient": {"type": "string", "description": "The format of the JSON to send. Default records.\nFor allowed values see:\nhttps://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json", "enum": ["records", "split", "index", "columns", "values", "table"]}, "batch": {"type": ["boolean", "integer"], "description": "If True, send the entire DataFrame as a single request. If False, send each row as a separate request. If an integer, send the DataFrame in batches of that size. default: True"}, "oauth": {"type": "object", "required": ["url"], "description": "Make a request to get an OAuth token prior to sending the main request", "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default POST.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "json": {"type": "object", "description": "Pass data as a JSON encoded request body."}}}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "matrix": {"type": "object", "description": "The matrix connector lets you use variables in a single write definition to automatically execute multiple writes that are based on the combinations of the variables. ", "required": ["variables", "write"], "properties": {"variables": {"type": "object", "description": "A set of variables as key/values. The write will be execute once for each combination of variables.\nValues may be a single value or a list, may use custom functions and may use the special syntax set(column_name) to use the unique values from a column."}, "write": {"type": "array", "description": "The write section of a recipe to execute for each combination of variables", "minItems": 1, "items": [{"$ref": "#/$defs/write/items"}]}, "strategy": {"type": "string", "enum": ["permutations", "loop"], "description": "Determines how to combine variables when there are multiple. loop (default) iterates over each set of variables, repeating shorter lists  until the longest is completed. permutations uses the combination of all  variables against all other variables."}, "max_concurrency": {"type": "integer", "minimum": 1, "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued. Default 10."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "memory": {"type": "object", "description": "The memory connector allows saving dataframes and variables in memory for communication between successive wrangles and recipes. All contents of the memory connector are lost once the python script finishes executing.", "properties": {"id": {"type": "string", "description": "A unique ID to identify the data"}, "orient": {"type": "string", "enum": ["dict", "list", "split", "tight", "index"], "description": "Set the arrangement of the data. See pandas.DataFrame.to_dict method for options. Default is tight"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mongodb": {"type": "object", "description": "Write data into a mongoDB database", "required": ["user", "password", "database", "collection", "host", "action"], "properties": {"user": {"type": "string", "description": "User with access to the database"}, "password": {"type": "string", "description": "Password of user"}, "database": {"type": "string", "description": "Database to be queried"}, "host": {"type": "string", "description": "mongoDB cluster-url"}, "action": {"type": "string", "description": "action to perform, actions supported INSERT UPDATE"}, "query": {"type": "object", "description": "mongoDB query to search for value to update or delete, only valid when using UPDATE, DELETE"}, "update": {"type": "object", "description": "mongoDB query value to update, only valid when using UPDATE"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mssql": {"type": "object", "description": "Write data to a Microsoft SQL Server", "required": ["host", "user", "password", "database", "table"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "database": {"type": "string", "description": "The database to connect to"}, "table": {"type": "string", "description": "The name of the table to insert the data into"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 1433."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "mysql": {"type": "object", "description": "Write data to a MySQL Server", "required": ["host", "user", "password", "database", "table"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "database": {"type": "string", "description": "The database to connect to"}, "table": {"type": "string", "description": "The name of the table to insert the data into"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 3306."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "postgres": {"type": "object", "description": "Write data to a PostgreSQL Server", "required": ["host", "user", "password", "database", "table"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the database with"}, "password": {"type": "string", "description": "Password for the specified user"}, "database": {"type": "string", "description": "The database to connect to"}, "table": {"type": "string", "description": "The name of the table to insert the data into"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 5432."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "pricefx": {"type": "object", "description": "Write data to a PriceFx instance. The names of the columns must match to the names within PriceFx.", "required": ["host", "partition", "target", "user", "password"], "properties": {"host": {"type": "string", "description": "Hostname e.g. example.pricefx.com"}, "partition": {"type": "string", "description": "Partition"}, "user": {"type": "string", "description": "The user to connect as"}, "password": {"type": "string", "description": "Password for the specified user"}, "target": {"type": "string", "description": "Target for the data. Products, Customers, Data Source, etc.", "enum": ["Company Parameters", "Customers", "Customer Extensions", "Data Source", "Products", "Product Extensions", "Product References", "Product Competition"]}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "source": {"type": "string", "description": "Required for Data Sources. Set the specific table."}, "autoflush": {"type": "boolean", "description": "Only relevant for Data Sources. If true, automatically trigger a flush after writing the data to a Data Source. Default True."}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "recipe": {"anyOf": [{"$ref": "#"}, {"type": "object", "required": ["name"], "properties": {"name": {"type": "string", "description": "The name of the recipe to read from"}, "variables": {"type": "object", "description": "A dictionary of variables to pass to the recipe"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}]}, "s3": {"type": "object", "description": "Write a file to AWS S3", "required": ["bucket", "key"], "properties": {"bucket": {"type": "string", "description": "The name of the bucket where file will be written"}, "key": {"type": "string", "description": "The name of the key of the file written"}, "access_key": {"type": "string", "description": "S3 access key"}, "secret_access_key": {"type": "string", "description": "S3 secret access key"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "salesforce": {"type": "object", "description": "Write data to Salesforce", "required": ["instance", "user", "password", "token", "object", "id"], "properties": {"instance": {"type": "string", "description": "The salesforce instance to write to e.g. <custom>.my.salesforce.com"}, "user": {"type": "string", "description": "User with write permission"}, "password": {"type": "string", "description": "Password for the user"}, "token": {"type": "string", "description": "Security token for the user"}, "object": {"type": "string", "description": "Object to write the data to e.g. Contact"}, "id": {"type": "string", "description": "Indicate the Id field. If the Id exists and is provided, the record will be updated, otherwise inserted."}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "domain": {"type": "string", "description": "(Optional) Use test to connect to a sandbox instance"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "sftp": {"type": "object", "description": "Export a file to an SFTP server", "required": ["host", "user", "password", "file"], "properties": {"host": {"type": "string", "description": "The domain or IP of the SFTP server"}, "user": {"type": "string", "description": "The user to connect as"}, "password": {"type": "string", "description": "The password for the user"}, "file": {"type": "string", "description": "The filename including path on the remote server"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "sheet_name": {"type": "string", "description": "Used for Excel files. Specify the sheet to create."}, "orient": {"type": "string", "description": "Used for JSON files. Specifies the output arrangement", "enum": ["split", "records", "index", "columns", "values"]}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "sqlite": {"type": "object", "description": "Export data to a SQLite Database", "required": ["database", "table"], "properties": {"database": {"type": "string", "description": "The database to connect to including the file path. e.g. directory/database.db"}, "table": {"type": "string", "description": "The table to write to"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.classify": {"type": "object", "description": "Train a new or existing Classify Wrangle", "additionalProperties": false, "properties": {"name": {"type": "string", "description": "Name to give to a new Wrangle that will be created"}, "model_id": {"type": "string", "description": "Model to be updated. Either this or a name must be provided"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.extract": {"type": "object", "description": "Train a new or existing Extract Wrangle", "additionalProperties": false, "properties": {"name": {"type": "string", "description": "Name to give to a new Wrangle that will be created"}, "model_id": {"type": "string", "description": "Model to be updated. Either this or a name must be provided"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.lookup": {"type": "object", "description": "Train a new or existing Lookup Wrangle", "additionalProperties": false, "properties": {"name": {"type": "string", "description": "Name to give to a new Wrangle that will be created"}, "model_id": {"type": "string", "description": "Model to be updated. Either this or a name must be provided"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "variant": {"type": "string", "description": "Variant of the Lookup Wrangle that will be created", "enum": ["key", "semantic"]}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "train.standardize": {"type": "object", "description": "Train a new or existing Standardize Wrangle", "additionalProperties": false, "properties": {"name": {"type": "string", "description": "Name to give to a new Wrangle that will be created"}, "model_id": {"type": "string", "description": "Model to be updated. Either this or a name must be provided"}, "columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}, "dataframe": {"type": "object", "description": "Define the dataframe that is returned from the recipe.run() function", "properties": {"columns": {"$ref": "#/$defs/write/commonProperties/columns"}, "not_columns": {"$ref": "#/$defs/write/commonProperties/not_columns"}, "where": {"$ref": "#/$defs/write/commonProperties/where"}, "where_params": {"$ref": "#/$defs/write/commonProperties/where_params"}, "order_by": {"$ref": "#/$defs/write/commonProperties/order_by"}, "if": {"$ref": "#/$defs/write/commonProperties/if"}}}}}, "commonProperties": {"columns": {"type": ["array", "integer", "string"], "description": "Specify a subset of the columns to include.\nAccepts wildcards using * or prefix with 'regex:' to use a regex pattern.\nIndicate a column is optional with column_name?\nIf not provided, all columns will be included"}, "not_columns": {"type": ["array", "integer", "string"], "description": "Specify a subset of the columns to ignore.\nAccepts wildcards using * or prefix with 'regex:' to use a regex pattern.\nIndicate a column is optional with column_name?\nIf not provided, all columns will be included"}, "if": {"type": "string", "description": "Specify a condition to determine if this will execute or not. e.g. ${variable} == 1. Recipe variables ${variable} are parameterized and may be used within the statement. Additional variables 'columns', 'row_count', 'column_count' and 'df' (the entire dataframe) are available."}, "where": {"type": "string", "description": "Filter the data to include using an equivalent to a SQL where criteria, such as column1 = 123 OR column2 = 'a'"}, "where_params": {"type": ["array", "object"], "description": "Variables to use in conjunctions with where.\nThis allows the query to be parameterized.\nThis uses sqlite syntax (? or :name)"}, "order_by": {"type": "string", "description": "Order the data by one or more columns.\nUse a comma to separate multiple columns.\nUse DESC to sort in descending order.\nExample: column1 DESC, column2\nColumns with spaces should be enclosed in double quotes."}}}, "run": {"items": {"type": "object", "description": "Run actions", "maxProperties": 1, "additionProperties": false, "patternProperties": {"^custom\\..*": {"type": "object", "description": "Use custom functions."}}, "properties": {"ckan.download": {"type": "object", "description": "Download data from CKAN and save to the local file system", "required": ["host", "dataset", "file"], "properties": {"host": {"type": "string", "description": "The host name of the CKAN site. e.g. https://data.example.com"}, "dataset": {"type": "string", "description": "The name of the dataset. This should be the url version e.g. my-dataset"}, "file": {"type": ["string", "array"], "description": "A name or list of files within the dataset. e.g. example.csv"}, "api_key": {"type": "string", "description": "API Key for the CKAN site."}, "output_file": {"type": ["string", "array"], "description": "A name or list of names that the output will be saved as.\nIf omitted, defaults to the same as the file.\n"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "ckan.upload": {"type": "object", "description": "Upload a file or list of files to a CKAN dataset", "required": ["host", "api_key", "dataset", "file"], "properties": {"host": {"type": "string", "description": "The host name of the CKAN site. e.g. https://data.example.com"}, "api_key": {"type": "string", "description": "API Key for the CKAN site."}, "dataset": {"type": "string", "description": "The name of the dataset. This should be the url version e.g. my-dataset"}, "file": {"type": ["string", "array"], "description": "The name of the specific file within the dataset. e.g. example.csv"}, "output_file": {"type": ["string", "array"], "description": "A name or list of names that the files will be saved as.\nIf omitted, defaults to the original filename.\n"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "concurrent": {"type": "object", "description": "The concurrent connector lets you run multiple actions simultaneously rather than sequentially", "required": ["run"], "properties": {"run": {"type": "array", "description": "Actions to run concurrently", "minItems": 1, "items": [{"$ref": "#/$defs/run/items"}]}, "max_concurrency": {"type": "integer", "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued.", "minimum": 1}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "http": {"type": "object", "description": "Issue a HTTP(S) request e.g. issue a request to a webhook on success or failure.", "required": ["url"], "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default GET.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "json": {"type": "object", "description": "Pass data as a JSON encoded request body."}, "oauth": {"type": "object", "required": ["url"], "description": "Make a request to get an OAuth token prior to sending the main request", "properties": {"url": {"type": "string", "description": "The URL to make the request to"}, "method": {"type": "string", "description": "The http method to use. Default POST.", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]}, "headers": {"type": "object", "description": "Headers to pass as part of the request"}, "params": {"type": "object", "description": "Pass URL encoded parameters"}, "json": {"type": "object", "description": "Pass data as a JSON encoded request body."}}}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "jinja": {"type": "object", "description": "Use a Jinja template with a context to create a file", "additionalProperties": false, "required": ["template", "context", "output_file"], "properties": {"template": {"type": "object", "additionalProperties": false, "description": "The template to apply the values to. Either a file or string.", "properties": {"file": {"type": "string", "description": "A .jinja file containing the template"}, "string": {"type": "string", "description": "A string which is used as the jinja template"}}}, "context": {"type": "object", "description": "A dictionary used to define the output template"}, "output_file": {"type": "string", "description": "File name/path for the file to be output"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "matrix": {"type": "object", "description": "The matrix connector lets you use variables to automatically execute multiple actions based on the combinations of those variables.", "required": ["variables", "run"], "properties": {"variables": {"type": "object", "description": "A set of variables as key/values. The action will be execute once for each combination of variables.\nValues may be a single value or a list or reference a custom function."}, "run": {"type": "array", "description": "The run section of a recipe to execute for each combination of variables", "minItems": 1, "items": [{"$ref": "#/$defs/run/items"}]}, "strategy": {"type": "string", "enum": ["permutations", "loop"], "description": "Determines how to combine variables when there are multiple. loop (default) iterates over each set of variables, repeating shorter lists  until the longest is completed. permutations uses the combination of all  variables against all other variables."}, "max_concurrency": {"type": "integer", "minimum": 1, "description": "The maximum number to execute in parallel. If there are more than this, the rest will be queued. Default 10."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "mssql": {"type": "object", "description": "Run a command against a Microsoft SQL Server such as triggering a query or stored procedure", "required": ["host", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "user": {"type": "string", "description": "The user to connect to the server with"}, "password": {"type": "string", "description": "Password for the specified user"}, "command": {"type": ["string", "array"], "description": "SQL command or a list of SQL commands to execute"}, "database": {"type": "string", "description": "The database to connect to"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 1433."}, "params": {"type": ["array", "object"], "description": "Variables to pass to a parameterized query.\nThis may use %s or %(name)s syntax"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "notification.email": {"type": "object", "description": "Send an email", "required": ["user", "password", "subject", "body"], "properties": {"user": {"type": "string", "description": "The user to send the email from. This may be your full email address, but depends on your service"}, "password": {"type": "string", "description": "The password for the user to send from"}, "subject": {"type": "string", "description": "The subject of the email"}, "body": {"type": "string", "description": "The body of the notification"}, "host": {"type": "string", "description": "The SMTP server for your service. This may be omitted for common services such as yahoo, gmail or hotmail but will be needed otherwise."}, "to": {"type": ["string", "array"], "description": "An email or list of emails to send the email to. If omitted, the email will be sent to the sender."}, "cc": {"type": ["string", "array"], "description": "An email or list of emails to cc the email to."}, "bcc": {"type": ["string", "array"], "description": "Blind Carbon Copy email address(es)."}, "name": {"type": "string", "description": "The name to show the email as being from. If omitted, defaults to the user."}, "domain": {"type": "string", "description": "The domain to send the email under. If omitted, it will be inferred from the user"}, "attachment": {"type": ["string", "array"], "description": "A file path & name to attach to the message. Supports a single file or a list of files. Must be supported by the specific notification type."}, "format": {"type": "string", "description": "The format of the message. One of 'text', 'markdown' or 'html'. Default is 'text'", "default": "text"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "notification.slack": {"type": "object", "description": "Send a message to Slack", "required": ["web_hook", "title", "message"], "properties": {"web_hook": {"type": "string", "description": "Webhook to post a message to Slack"}, "title": {"type": "string", "description": "Title of the message to send to Slack"}, "message": {"type": "string", "description": "Message to send to Slack"}, "attachment": {"type": ["string", "array"], "description": "A file path & name to attach to the message. Supports a single file or a list of files. Must be supported by the specific notification type."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "notification.telegram": {"type": "object", "description": "Send a telegram message. See https://core.telegram.org/bots", "required": ["bot_token", "chat_id", "title", "body"], "properties": {"bot_token": {"type": "string", "description": "The token for the bot. See https://core.telegram.org/bots"}, "chat_id": {"type": "string", "description": "The ID of the chat. See https://core.telegram.org/bots"}, "title": {"type": "string", "description": "The title of the notification"}, "body": {"type": "string", "description": "The body of the notification"}, "attachment": {"type": ["string", "array"], "description": "A file path & name to attach to the message. Supports a single file or a list of files. Must be supported by the specific notification type."}, "format": {"type": "string", "description": "The format of the message. One of 'text', 'markdown' or 'html'. Default is 'text'", "default": "text"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "notification": {"type": "object", "description": "Send a notification", "required": ["url", "title", "body"], "properties": {"url": {"type": "string", "description": "Apprise notification url. See https://github.com/caronc/apprise"}, "title": {"type": "string", "description": "The title of the notification"}, "body": {"type": "string", "description": "The body of the notification"}, "attachment": {"type": ["string", "array"], "description": "A file path & name to attach to the message. Supports a single file or a list of files. Must be supported by the specific notification type."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "postgres": {"type": "object", "description": "Run a command against a PostgreSQL Server such as triggering a query or stored procedure", "required": ["host", "database", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Hostname or IP address of the server"}, "database": {"type": "string", "description": "The name of the database to execute the query against"}, "user": {"type": "string", "description": "The user to connect to the server as"}, "password": {"type": "string", "description": "Password for the specified user"}, "command": {"type": ["string", "array"], "description": "SQL command or a list of SQL commands to execute"}, "port": {"type": "integer", "description": "The Port to connect to. Defaults to 5432."}, "params": {"type": ["array", "object"], "description": "Variables to pass to a parameterized query.\nThis may use %s or %(name)s syntax"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "recipe": {"anyOf": [{"$ref": "#"}, {"type": "object", "required": ["name"], "properties": {"name": {"type": "string", "description": "The name of the recipe to execute"}, "variables": {"type": "object", "description": "A dictionary of variables to pass to the recipe"}}}], "properties": {"if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "s3.download_files": {"type": "object", "description": "Download file(s) from S3 and save to the local file system.", "required": ["bucket", "key"], "properties": {"bucket": {"type": "string", "description": "S3 Bucket"}, "key": {"type": ["string", "array"], "description": "S3 file key or list of keys to download"}, "file": {"type": ["string", "array"], "description": "Local filename or list of filenames to save the downloaded files as"}, "endpoint_url": {"type": "string", "description": "Override the S3 host for alternative S3 storage providers."}, "aws_access_key_id": {"type": "string", "description": "Set the access key. Can also be set as an environment variable"}, "aws_secret_access_key": {"type": "string", "description": "Set the access secret. Can also be set as an environment variable"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "s3.upload_files": {"type": "object", "description": "Upload file(s) to S3 from the local file system.", "required": ["bucket", "file"], "properties": {"bucket": {"type": "string", "description": "S3 Bucket"}, "key": {"type": ["string", "array"], "description": "S3 file key or list of keys to upload as"}, "file": {"type": ["string", "array"], "description": "File or list of files to upload."}, "endpoint_url": {"type": "string", "description": "Override the S3 host for alternative S3 storage providers."}, "aws_access_key_id": {"type": "string", "description": "Set the access key. Can also be set as an environment variable"}, "aws_secret_access_key": {"type": "string", "description": "Set the access secret. Can also be set as an environment variable"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "sftp.download_files": {"type": "object", "description": "Download files from an SFTP host and save to the local file system.", "required": ["host", "user", "password", "files"], "properties": {"host": {"type": "string", "description": "The hostname of the SFTP server.", "examples": ["sftp.domain.com"]}, "user": {"type": "string", "description": "The user to authenticate as."}, "password": {"type": "string", "description": "The password for the user."}, "files": {"type": ["string", "array"], "description": "A file, or list of files, to download. If local is not specified, they will be saved to the current directory."}, "local": {"type": ["string", "array"], "description": "(Optional) The local filename(s) to save the remote files as."}, "port": {"type": "integer", "description": "The port to connect to. Default 22."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "sftp.upload_files": {"type": "object", "description": "Upload files from the local file system to an SFTP host.", "required": ["host", "user", "password", "files"], "properties": {"host": {"type": "string", "description": "The hostname of the SFTP server.", "examples": ["sftp.domain.com"]}, "user": {"type": "string", "description": "The user to authenticate as."}, "password": {"type": "string", "description": "The password for the user."}, "files": {"type": ["string", "array"], "description": "A file, or list of files, to upload. If remote is not specified, they will be saved to the SFTP user's default directory."}, "remote": {"type": ["string", "array"], "description": "(Optional) The remote filename(s) to save the files as."}, "port": {"type": "integer", "description": "The port to connect to. Default 22."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "sqlite": {"type": "object", "description": "Run a command against a SQLite Database", "required": ["database", "command"], "properties": {"database": {"type": "string", "description": "The database to connect to including the file path. e.g. directory/database.db"}, "command": {"type": ["string", "array"], "description": "SQL command or a list of SQL commands to execute"}, "params": {"type": ["array", "object"], "description": "Variables to pass to a parameterized query.\nThis may use %s or %(name)s syntax"}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}, "ssh": {"type": "object", "description": "Issue commands over SSH", "required": ["host", "user", "password", "command"], "properties": {"host": {"type": "string", "description": "Domain or IP of the host"}, "user": {"type": "string", "description": "The user to connect as"}, "password": {"type": "string", "description": "Password for the user"}, "key_filename": {"type": "string", "description": "Path to a file that contains the private key"}, "private_key": {"type": "string", "description": "Provide an RSA Private Key as a string"}, "command": {"type": ["string", "array"], "description": "Command or list of commands to execute. When providing a list, note that all commands are executed in isolation, i.e. cd /dir in a prior command will not affect the directory for later commands."}, "if": {"$ref": "#/$defs/run/commonProperties/if"}}}}}, "commonProperties": {"if": {"type": "string", "description": "Specify a condition to determine if this will execute or not. e.g. ${variable} == 1. Recipe variables ${variable} are parameterized and may be used within the statement."}}}, "misc": {"unit_entity_map": {"allOf": [{"if": {"properties": {"attribute_type": {"const": "area"}}}, "then": {"properties": {"desired_unit": {"enum": ["square meter", "square yard", "square foot", "square inch"]}}}}, {"if": {"properties": {"attribute_type": {"const": "current"}}}, "then": {"properties": {"desired_unit": {"enum": ["kiloamp", "milliamp", "amp"]}}}}, {"if": {"properties": {"attribute_type": {"const": "force"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilonewton", "newton", "pound force"]}}}}, {"if": {"properties": {"attribute_type": {"const": "power"}}}, "then": {"properties": {"desired_unit": {"enum": ["megawatt", "kilowatt", "watt", "horsepower"]}}}}, {"if": {"properties": {"attribute_type": {"const": "pressure"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilopascal", "pascal", "psi", "bar"]}}}}, {"if": {"properties": {"attribute_type": {"const": "temperature"}}}, "then": {"properties": {"desired_unit": {"enum": ["celsius", "fahrenheit", "kelvin", "rankine"]}}}}, {"if": {"properties": {"attribute_type": {"pattern": "^volume$"}}}, "then": {"properties": {"desired_unit": {"enum": ["liter", "milliliter", "gallon"]}}}}, {"if": {"properties": {"attribute_type": {"pattern": "^volumetric flow$"}}}, "then": {"properties": {"desired_unit": {"enum": ["liter per minute", "gallon per minute", "cubic foot per minute"]}}}}, {"if": {"properties": {"attribute_type": {"const": "length"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilometer", "meter", "centimeter", "millimeter", "mile", "yard", "foot", "inch"]}}}}, {"if": {"properties": {"attribute_type": {"const": "weight"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilogram", "gram", "milligram", "pound"]}}}}, {"if": {"properties": {"attribute_type": {"const": "voltage"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilovolt", "volt", "millivolt"]}}}}, {"if": {"properties": {"attribute_type": {"const": "angle"}}}, "then": {"properties": {"desired_unit": {"enum": ["degree", "radian"]}}}}, {"if": {"properties": {"attribute_type": {"const": "capacitance"}}}, "then": {"properties": {"desired_unit": {"enum": ["farad", "microfarad", "nanofarad"]}}}}, {"if": {"properties": {"attribute_type": {"const": "frequency"}}}, "then": {"properties": {"desired_unit": {"enum": ["gigahertz", "megahertz", "kilohertz", "hertz"]}}}}, {"if": {"properties": {"attribute_type": {"const": "speed"}}}, "then": {"properties": {"desired_unit": {"enum": ["kph", "meter per second", "mph", "foot per second"]}}}}, {"if": {"properties": {"attribute_type": {"const": "velocity"}}}, "then": {"properties": {"desired_unit": {"enum": ["kph", "meter per second", "mph", "foot per second"]}}}}, {"if": {"properties": {"attribute_type": {"const": "charge"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilocoulomb", "coulomb", "millicoulomb"]}}}}, {"if": {"properties": {"attribute_type": {"const": "data transfer rate"}}}, "then": {"properties": {"desired_unit": {"enum": ["gigabit per second", "megabit per second", "kilobit per second", "bit per second"]}}}}, {"if": {"properties": {"attribute_type": {"const": "electrical conductance"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilosiemens", "siemens", "millisiemens"]}}}}, {"if": {"properties": {"attribute_type": {"const": "inductance"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilohenry", "henry", "millihenry"]}}}}, {"if": {"properties": {"attribute_type": {"const": "instance frequency"}}}, "then": {"properties": {"desired_unit": {"enum": ["revolutions per minute", "cycles per second"]}}}}, {"if": {"properties": {"attribute_type": {"const": "luminous flux"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilolumen", "lumen", "millilumen"]}}}}, {"if": {"properties": {"attribute_type": {"const": "energy"}}}, "then": {"properties": {"desired_unit": {"enum": ["kilojoule", "joule", "millijoule", "Calorie", "british thermal unit", "kWh"]}}}}]}}}}